---
title: "Lesson 14 and 15: Python for geo-scripting"
author: "Jan Verbesselt, Jorge Mendes de Jesus, Aldo Bergsma, Eliakim Hamunyela"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  html_document:
    theme: united
    toc: true
    toc_depth: 4
    number_sections: true
    highlight: pygments
---

# Getting started with Python within OS-GEO live linux

- Launch osgeo live from vmware viewer, login.
- Open the terminal and type the following to check the installed GDAL version:

```{r, eval = FALSE, engine='bash'}
## from R: system("gdal-config --version")
## From the terminal:
gdal-config --version
```

- type the following to start python and find out what the python version is:

```{r, eval=FALSE}
python # type this in the terminal to start the python interpreter
```

An example script to find out what the installed Python version is ([more info in question asked on stackoverflow](https://stackoverflow.com/questions/1093322/how-do-i-check-what-version-of-python-is-running-my-script))

```{r, engine='python'}
import sys
print sys.version #parentheses necessary in python 3. 
```

To exit python:
```{r, eval=FALSE}
exit()
```

- Open the python script within a Python editor

# A short Python refresher

## Numbers and variables

*Question*: What is the difference between 10 and 10.0 when dealing with datatypes in Python???

```{r, eval=FALSE, message=FALSE, echo=FALSE}
# 10 -> Integer -> Natural + negative numbers
## Int
# 10.0 -> Floating point -> Real number() -> "digits before and after the decimal point"
## Float
```

```{r, engine='python'}
print(int(10.6))
```

Variable is a storage location or symbolic name to a value e.g.

```{r, engine='python'}
building = 'Gaia'
buildingNumber = 101
'Gaia'
"doesn't"
'Gaia' + 'is in Wageningen'
```

There is no need to say or define the datatype, `python` has a loose type variable declaration. 

*Walk like a duck and swims like a duck and quacks like a duck I call it a duck*

Python is basically a list of objects:
List are organised with indexes. E.g. 

```{r setup, include=FALSE}
library(knitr)
opts_chunk$set(engine = 'python')
```

## Lists

```{r campus, engine='python'}
campus = ['Gaia','Lumen', 'Radix', 'Forum']
# how to can we print Forum?
print(campus[3])
# how to access the end of the list (while having no idea how big it is)
print(campus[-1])
# how to access the first 3 items
print(campus[0:3])
```

Appending, inserting, extending and steps:
```{r, engine='python'}
campus = ['Gaia','Lumen', 'Radix', 'Forum']
campus.append("Atlas")
campus.insert(1,"SoilMuseum")
campus.extend(["Action","Vitae", "Zodiac"])
print campus
print campus[::2]
## list[start:end:step]
```

*Question?*: What are the major differences between Append/Extend?
**Question:** What building is campus[-2]?

## Dictionaries, loops, if/else

Let there be Dictionaries... Dictionary is an unordered set of key:value pairs. Like in the dictionary, 'food':'voedsel'.

```{r, engine='python'}
# dictionary
campusDic = {101:'Gaia',
             100:'Lumen',
             107:'Radix',
             102:'Forum',
             104:'Altas'}
print campusDic[102]
```

Loops: watch out here with code intendation. Python uses Intendation to define code block and not `{}` like other languages.
Print building has to be *intended* normally 1 tab or 4 spaces (recommended).

```{r, engine='python'}
campus = ['Gaia','Lumen', 'Radix', 'Forum']
for building in campus:
    print building
```


Here, `building` is a variable that will contain any item in the campus list.

Generic loops in python have to interact over a sequence of objects e.g.

```{r, engine='python'}
range(5)
for number in range(5):
    print number
```

Object interaction and functional programming is an important part of python programming and its tools are extensive.
If/else:

```{r, engine='python'}
x = 3
if x < 3:
    print "below 3"
else:
    print "above 3"
```

```{r, engine='python'}
x = 3
if x == 1:
    print "it is one"
elif x==2:
    print "it is two"
elif x==3:
    print "it is three"
else: 
    print "above 3"
```

# Handling Vector data with Python

Go to [Vector Data handling in Python](https://geoscripting-wur.github.io/PythonWeek/VectorPython.html)

# Raster data with Python

raster data

# R from Python

A very simple example using the Python Rpy2 module:
```{r, engine='python', eval =FALSE}
import rpy2.robjects as robjects
pi = robjects.r['pi']
print(pi[0])
```

# More info
- [The official python tutorial](https://docs.python.org/2/tutorial/)
